yii.validation = function (e) {
    var a = {
        isEmpty: function (a) {
            return null == a || e.isArray(a) && 0 === a.length || "" === a
        }, addMessage: function (e, a, t) {
            e.push(a.replace(/\{value\}/g, t))
        }, required: function (t, s, n) {
            var i, r = !1;
            void 0 === n.requiredValue ? (i = "string" == typeof t || t instanceof String, (n.strict && void 0 !== t || !n.strict && !a.isEmpty(i ? e.trim(t) : t)) && (r = !0)) : (!n.strict && t == n.requiredValue || n.strict && t === n.requiredValue) && (r = !0), r || a.addMessage(s, n.message, t)
        }, boolean: function (e, t, s) {
            s.skipOnEmpty && a.isEmpty(e) || !s.strict && (e == s.trueValue || e == s.falseValue) || s.strict && (e === s.trueValue || e === s.falseValue) || a.addMessage(t, s.message, e)
        }, string: function (e, t, s) {
            s.skipOnEmpty && a.isEmpty(e) || ("string" == typeof e ? void 0 === s.is || e.length == s.is ? (void 0 !== s.min && e.length < s.min && a.addMessage(t, s.tooShort, e), void 0 !== s.max && e.length > s.max && a.addMessage(t, s.tooLong, e)) : a.addMessage(t, s.notEqual, e) : a.addMessage(t, s.message, e))
        }, file: function (a, n, i) {
            a = t(a, n, i), e.each(a, (function (e, a) {
                s(a, n, i)
            }))
        }, image: function (n, i, r, o) {
            n = t(n, i, r), e.each(n, (function (t, n) {
                var l;
                s(n, i, r), "undefined" != typeof FileReader && (l = e.Deferred(), a.validateImage(n, i, r, l, new FileReader, new Image), o.push(l))
            }))
        }, validateImage: function (e, a, t, s, n, i) {
            i.onload = function () {
                var n, r, o, l;
                n = e, r = i, o = a, (l = t).minWidth && r.width < l.minWidth && o.push(l.underWidth.replace(/\{file\}/g, n.name)), l.maxWidth && r.width > l.maxWidth && o.push(l.overWidth.replace(/\{file\}/g, n.name)), l.minHeight && r.height < l.minHeight && o.push(l.underHeight.replace(/\{file\}/g, n.name)), l.maxHeight && r.height > l.maxHeight && o.push(l.overHeight.replace(/\{file\}/g, n.name)), s.resolve()
            }, i.onerror = function () {
                a.push(t.notImage.replace(/\{file\}/g, e.name)), s.resolve()
            }, n.onload = function () {
                i.src = this.result
            }, n.onerror = function () {
                s.resolve()
            }, n.readAsDataURL(e)
        }, number: function (e, t, s) {
            s.skipOnEmpty && a.isEmpty(e) || ("string" != typeof e || s.pattern.test(e) ? (void 0 !== s.min && e < s.min && a.addMessage(t, s.tooSmall, e), void 0 !== s.max && e > s.max && a.addMessage(t, s.tooBig, e)) : a.addMessage(t, s.message, e))
        }, range: function (t, s, n) {
            var i;
            n.skipOnEmpty && a.isEmpty(t) || (n.allowArray || !e.isArray(t) ? (i = !0, e.each(e.isArray(t) ? t : [t], (function (a, t) {
                return -1 != e.inArray(t, n.range) || (i = !1)
            })), void 0 === n.not && (n.not = !1), n.not === i && a.addMessage(s, n.message, t)) : a.addMessage(s, n.message, t))
        }, regularExpression: function (e, t, s) {
            s.skipOnEmpty && a.isEmpty(e) || (!s.not && !s.pattern.test(e) || s.not && s.pattern.test(e)) && a.addMessage(t, s.message, e)
        }, email: function (e, t, s) {
            var n, i, r;
            s.skipOnEmpty && a.isEmpty(e) || (null === (n = /^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/.exec(e)) || (i = n[5], r = n[6], s.enableIDN && (i = punycode.toASCII(i), r = punycode.toASCII(r), e = n[1] + n[3] + i + "@" + r + n[7]), 64 < i.length || 254 < (i + "@" + r).length || !(s.pattern.test(e) || s.allowName && s.fullPattern.test(e)))) && a.addMessage(t, s.message, e)
        }, url: function (e, t, s) {
            var n, i;
            s.skipOnEmpty && a.isEmpty(e) || (s.defaultScheme && !/:\/\//.test(e) && (e = s.defaultScheme + "://" + e), n = !0, s.enableIDN && (null === (i = /^([^:]+):\/\/([^\/]+)(.*)$/.exec(e)) ? n = !1 : e = i[1] + "://" + punycode.toASCII(i[2]) + i[3]), n && s.pattern.test(e) || a.addMessage(t, s.message, e))
        }, trim: function (t, s, n, i) {
            return (s = t.find(s.input)).is(":checkbox, :radio") || (i = s.val(), n.skipOnEmpty && a.isEmpty(i) || (i = e.trim(i), s.val(i))), i
        }, captcha: function (t, s, n) {
            if (!n.skipOnEmpty || !a.isEmpty(t)) {
                for (var i = null == (i = e("body").data(n.hashKey)) ? n.hash : i[n.caseSensitive ? 0 : 1], r = n.caseSensitive ? t : t.toLowerCase(), o = r.length - 1, l = 0; 0 <= o; --o) l += r.charCodeAt(o);
                l != i && a.addMessage(s, n.message, t)
            }
        }, compare: function (t, s, n, i) {
            if (!n.skipOnEmpty || !a.isEmpty(t)) {
                var r, o = !0,
                    l = void 0 === n.compareAttribute ? n.compareValue : ((r = e("#" + n.compareAttribute)).length || (r = i.find('[name="' + n.compareAttributeName + '"]')), r.val());
                switch ("number" === n.type && (t = t ? parseFloat(t) : 0, l = l ? parseFloat(l) : 0), n.operator) {
                    case"==":
                        o = t == l;
                        break;
                    case"===":
                        o = t === l;
                        break;
                    case"!=":
                        o = t != l;
                        break;
                    case"!==":
                        o = t !== l;
                        break;
                    case">":
                        o = l < t;
                        break;
                    case">=":
                        o = l <= t;
                        break;
                    case"<":
                        o = t < l;
                        break;
                    case"<=":
                        o = t <= l;
                        break;
                    default:
                        o = !1
                }
                o || a.addMessage(s, n.message, t)
            }
        }, ip: function (e, t, s) {
            var n, i, r;
            s.skipOnEmpty && a.isEmpty(e) || (i = n = null, (r = new RegExp(s.ipParsePattern).exec(e)) && (n = r[1] || null, e = r[2], i = r[4] || null), !0 !== s.subnet || null !== i ? !1 !== s.subnet || null === i ? !1 !== s.negation || null === n ? 6 == (-1 === e.indexOf(":") ? 4 : 6) ? (new RegExp(s.ipv6Pattern).test(e) || a.addMessage(t, s.messages.message, e), s.ipv6 || a.addMessage(t, s.messages.ipv6NotAllowed, e)) : (new RegExp(s.ipv4Pattern).test(e) || a.addMessage(t, s.messages.message, e), s.ipv4 || a.addMessage(t, s.messages.ipv4NotAllowed, e)) : a.addMessage(t, s.messages.message, e) : a.addMessage(t, s.messages.hasSubnet, e) : a.addMessage(t, s.messages.noSubnet, e))
        }
    };

    function t(a, t, s) {
        return "undefined" == typeof File || void 0 === (a = e(a.input, a.$form).get(0)) ? [] : (a = a.files) ? 0 === a.length ? (s.skipOnEmpty || t.push(s.uploadRequired), []) : s.maxFiles && s.maxFiles < a.length ? (t.push(s.tooMany), []) : a : (t.push(s.message), [])
    }

    function s(e, a, t) {
        if (t.extensions && 0 < t.extensions.length) {
            for (var s = !1, n = e.name.toLowerCase(), i = 0; i < t.extensions.length; i++) {
                var r = t.extensions[i].toLowerCase();
                if ("" === r && -1 === n.indexOf(".") || n.substr(n.length - t.extensions[i].length - 1) === "." + r) {
                    s = !0;
                    break
                }
            }
            s || a.push(t.wrongExtension.replace(/\{file\}/g, e.name))
        }
        t.mimeTypes && 0 < t.mimeTypes.length && !function (e, a) {
            for (var t = 0, s = e.length; t < s; t++) if (new RegExp(e[t]).test(a)) return !0;
            return !1
        }(t.mimeTypes, e.type) && a.push(t.wrongMimeType.replace(/\{file\}/g, e.name)), t.maxSize && t.maxSize < e.size && a.push(t.tooBig.replace(/\{file\}/g, e.name)), t.minSize && t.minSize > e.size && a.push(t.tooSmall.replace(/\{file\}/g, e.name))
    }

    return a
}(jQuery);
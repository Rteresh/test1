!function (t) {
    function i(t) {
        e && (e.resolve(), e = void 0, t.removeData("yiiSubmitFinalizePromise"))
    }

    t.fn.yiiActiveForm = function (i) {
        return r[i] ? r[i].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof i && i ? (t.error("Method " + i + " does not exist on jQuery.yiiActiveForm"), !1) : r.init.apply(this, arguments)
    };
    var e, a = {
        encodeErrorSummary: !0,
        errorSummary: ".error-summary",
        validateOnSubmit: !0,
        errorCssClass: "has-error",
        successCssClass: "has-success",
        validatingCssClass: "validating",
        ajaxParam: "ajax",
        ajaxDataType: "json",
        validationUrl: void 0,
        scrollToError: !0,
        scrollToErrorOffset: 0,
        validationStateOn: "container"
    }, n = {
        id: void 0,
        name: void 0,
        container: void 0,
        input: void 0,
        error: ".help-block",
        encodeError: !0,
        validateOnChange: !0,
        validateOnBlur: !0,
        validateOnType: !1,
        validationDelay: 500,
        enableAjaxValidation: !1,
        validate: void 0,
        status: 0,
        cancelled: !1,
        value: void 0,
        updateAriaInvalid: !0
    }, r = {
        init: function (i, e) {
            return this.each((function () {
                var o, u = t(this);
                u.data("yiiActiveForm") || (void 0 === (o = t.extend({}, a, e || {})).validationUrl && (o.validationUrl = u.attr("action")), t.each(i, (function (e) {
                    i[e] = t.extend({value: A(u, this)}, n, this), s(u, i[e])
                })), u.data("yiiActiveForm", {
                    settings: o,
                    attributes: i,
                    submitting: !1,
                    validated: !1,
                    options: f(u)
                }), u.on("reset.yiiActiveForm", r.resetForm), o.validateOnSubmit && (u.on("mouseup.yiiActiveForm keyup.yiiActiveForm", ":submit", (function () {
                    u.data("yiiActiveForm").submitObject = t(this)
                })), u.on("submit.yiiActiveForm", r.submitForm)), o = t.Event("afterInit"), u.trigger(o))
            }))
        }, add: function (i) {
            var e = t(this);
            i = t.extend({value: A(e, i)}, n, i), e.data("yiiActiveForm").attributes.push(i), s(e, i)
        }, remove: function (i) {
            var e = t(this), a = e.data("yiiActiveForm").attributes, n = -1, r = void 0;
            return t.each(a, (function (t) {
                if (a[t].id == i) return r = a[n = t], !1
            })), 0 <= n && (a.splice(n, 1), o(e, r)), r
        }, validateAttribute: function (i) {
            null != (i = r.find.call(this, i)) && u(t(this), i, !0)
        }, find: function (i) {
            var e = t(this).data("yiiActiveForm").attributes, a = void 0;
            return t.each(e, (function (t) {
                if (e[t].id == i) return a = e[t], !1
            })), a
        }, destroy: function () {
            return this.each((function () {
                t(this).off(".yiiActiveForm"), t(this).removeData("yiiActiveForm")
            }))
        }, data: function () {
            return this.data("yiiActiveForm")
        }, validate: function (e) {
            e && (t(this).data("yiiActiveForm").submitting = !0);
            var a = t(this), n = a.data("yiiActiveForm"), r = !1, s = {}, o = v(), u = n.submitting;
            if (u && (e = t.Event("beforeValidate"), a.trigger(e, [s, o]), !1 === e.result)) return n.submitting = !1, void i(a);
            t.each(n.attributes, (function () {
                if (this.$form = a, (d = C(a, this)).toArray().reduce(((i, e) => i && t(e).is(":disabled")), !0)) return !0;
                if (d.length && "select" === d[0].tagName.toLowerCase()) {
                    var i = d[0].options, e = !i || !i.length, u = d.attr("required"), l = d.attr("multiple"),
                        d = d.attr("size") || 1;
                    if (u && !l && 1 === parseInt(d, 10)) {
                        if (e) return !0;
                        if (i[0] && "" !== i[0].value && "" !== i[0].text) return !0
                    }
                }
                this.cancelled = !1, !n.submitting && 2 !== this.status && 3 !== this.status || (void 0 === (e = s[this.id]) && (e = [], s[this.id] = e), i = t.Event("beforeValidateAttribute"), a.trigger(i, [this, e, o]), !1 !== i.result ? (this.validate && this.validate(this, A(a, this), e, o, a), this.enableAjaxValidation && (r = !0)) : this.cancelled = !0)
            })), t.when.apply(this, o).always((function () {
                for (var e in s) 0 === s[e].length && delete s[e];
                var o, l;
                r && (t.isEmptyObject(s) || n.submitting) ? (o = n.submitObject, l = "&" + n.settings.ajaxParam + "=" + a.attr("id"), o && o.length && o.attr("name") && (l += "&" + o.attr("name") + "=" + o.attr("value")), t.ajax({
                    url: n.settings.validationUrl,
                    type: a.attr("method"),
                    data: a.serialize() + l,
                    dataType: n.settings.ajaxDataType,
                    complete: function (t, i) {
                        a.trigger("ajaxComplete", [t, i])
                    },
                    beforeSend: function (t, i) {
                        a.trigger("ajaxBeforeSend", [t, i])
                    },
                    success: function (i) {
                        null !== i && "object" == typeof i ? (t.each(n.attributes, (function () {
                            this.enableAjaxValidation && !this.cancelled || delete i[this.id]
                        })), m(a, t.extend(s, i), u)) : m(a, s, u)
                    },
                    error: function () {
                        n.submitting = !1, i(a)
                    }
                })) : n.submitting ? window.setTimeout((function () {
                    m(a, s, u)
                }), 200) : m(a, s, u)
            }))
        }, submitForm: function () {
            var a = t(this), n = a.data("yiiActiveForm");
            if (n.validated) {
                n.submitting = !1;
                var s = t.Event("beforeSubmit");
                return a.trigger(s), !1 === s.result ? (n.validated = !1, i(a), !1) : (g(a), !0)
            }
            return s = a, e = t.Deferred(), s.data("yiiSubmitFinalizePromise", e.promise()), void 0 !== n.settings.timer && clearTimeout(n.settings.timer), n.submitting = !0, r.validate.call(a), !1
        }, resetForm: function () {
            var i = t(this), e = i.data("yiiActiveForm");
            window.setTimeout((function () {
                t.each(e.attributes, (function () {
                    this.value = A(i, this), this.status = 0;
                    var t = i.find(this.container), a = C(i, this);
                    ("input" === e.settings.validationStateOn ? a : t).removeClass(e.settings.validatingCssClass + " " + e.settings.errorCssClass + " " + e.settings.successCssClass), t.find(this.error).html("")
                })), i.find(e.settings.errorSummary).hide().find("ul").html("")
            }), 1)
        }, updateMessages: function (i, e) {
            var a = t(this), n = a.data("yiiActiveForm");
            t.each(n.attributes, (function () {
                y(a, this, i)
            })), e && p(a, i)
        }, updateAttribute: function (i, e) {
            var a, n = r.find.call(this, i);
            null != n && ((a = {})[i] = e, y(t(this), n, a))
        }
    }, s = function (i, e) {
        var a = C(i, e);
        e.validateOnChange && a.on("change.yiiActiveForm", (function () {
            u(i, e, !1)
        })), e.validateOnBlur && a.on("blur.yiiActiveForm", (function () {
            0 != e.status && 1 != e.status || u(i, e, !0)
        })), e.validateOnType && a.on("keyup.yiiActiveForm", (function (a) {
            -1 === t.inArray(a.which, [16, 17, 18, 37, 38, 39, 40]) && e.value !== A(i, e) && u(i, e, !1, e.validationDelay)
        }))
    }, o = function (t, i) {
        C(t, i).off(".yiiActiveForm")
    }, u = function (i, e, a, n) {
        var s = i.data("yiiActiveForm");
        a && (e.status = 2), t.each(s.attributes, (function () {
            l(this.value, A(i, this)) || (this.status = 2, a = !0)
        })), a && (void 0 !== s.settings.timer && clearTimeout(s.settings.timer), s.settings.timer = window.setTimeout((function () {
            s.submitting || i.is(":hidden") || (t.each(s.attributes, (function () {
                var t, e;
                2 === this.status && (this.status = 3, t = i.find(this.container), e = C(i, this), ("input" === s.settings.validationStateOn ? e : t).addClass(s.settings.validatingCssClass))
            })), r.validate.call(i))
        }), n || 200))
    }, l = function (t, i) {
        return t instanceof Object ? d(t, i) : Array.isArray(t) ? c(t, i) : t === i
    }, d = function (t, i) {
        if (!(t instanceof Object && i instanceof Object)) return !1;
        var e = Object.keys(t), a = Object.keys(i);
        if (e.length !== a.length) return !1;
        for (var n = 0; n < e.length; n += 1) {
            if (!i.hasOwnProperty(e[n])) return !1;
            if (t[e[n]] !== i[e[n]]) return !1
        }
        return !0
    }, c = function (t, i) {
        if (!Array.isArray(t) || !Array.isArray(i)) return !1;
        if (t.length !== i.length) return !1;
        for (var e = 0; e < t.length; e += 1) if (t[e] !== i[e]) return !1;
        return !0
    }, v = function () {
        var i = [];
        return i.add = function (i) {
            this.push(new t.Deferred(i))
        }, i
    }, h = ["action", "target", "method", "enctype"], f = function (t) {
        for (var i = {}, e = 0; e < h.length; e++) i[h[e]] = t.attr(h[e]);
        return i
    }, m = function (e, a, n) {
        var r = e.data("yiiActiveForm");
        if (void 0 === r) return !1;
        var s, o, u = [];
        t.each(r.attributes, (function () {
            var t = n && y(e, this, a) || !n && b(e, this, a);
            C(e, this).is(":disabled") || this.cancelled || !t || u.push(this)
        })), e.trigger("afterValidate", [a, u]), n ? (p(e, a), u.length ? (r.settings.scrollToError && (o = t(document).height(), ((s = (s = e.find(t.map(u, (function (t) {
            return t.input
        })).join(",")).first().closest(":visible").offset().top - r.settings.scrollToErrorOffset) < 0 ? 0 : o < s ? o : s) < (o = t(window).scrollTop()) || s > o + t(window).height()) && t(window).scrollTop(s)), r.submitting = !1) : (r.validated = !0, r.submitObject && function (t, i) {
            for (var e = 0; e < h.length; e++) {
                var a = i.attr("form" + h[e]);
                a && t.attr(h[e], a)
            }
        }(e, r.submitObject), e.submit(), r.submitObject && function (t) {
            for (var i = t.data("yiiActiveForm"), e = 0; e < h.length; e++) t.attr(h[e], i.options[h[e]] || null)
        }(e))) : t.each(r.attributes, (function () {
            this.cancelled || 2 !== this.status && 3 !== this.status || y(e, this, a)
        })), i(e)
    }, g = function (i) {
        var e, a = i.data("yiiActiveForm").submitObject || i.find(":submit:first");
        a.length && "submit" == a.attr("type") && a.attr("name") && ((e = t('input[type="hidden"][name="' + a.attr("name") + '"]', i)).length ? e.attr("value", a.attr("value")) : t("<input>").attr({
            type: "hidden",
            name: a.attr("name"),
            value: a.attr("value")
        }).appendTo(i))
    }, y = function (i, e, a) {
        var n, r, s = i.data("yiiActiveForm"), o = C(i, e), u = b(i, e, a);
        return t.isArray(a[e.id]) || (a[e.id] = []), e.status = 1, o.length && (n = (r = i.find(e.container)).find(e.error), F(i, e, u), r = "input" === s.settings.validationStateOn ? o : r, u ? (e.encodeError ? n.text(a[e.id][0]) : n.html(a[e.id][0]), r.removeClass(s.settings.validatingCssClass + " " + s.settings.successCssClass).addClass(s.settings.errorCssClass)) : (n.empty(), r.removeClass(s.settings.validatingCssClass + " " + s.settings.errorCssClass + " ").addClass(s.settings.successCssClass)), e.value = A(i, e)), i.trigger("afterValidateAttribute", [e, a[e.id]]), u
    }, b = function (i, e, a) {
        var n = C(i, e);
        i = !1;
        return t.isArray(a[e.id]) || (a[e.id] = []), n.length && (i = 0 < a[e.id].length), i
    }, p = function (i, e) {
        var a = i.data("yiiActiveForm"), n = (i = i.find(a.settings.errorSummary)).find("ul").empty();
        i.length && e && (t.each(a.attributes, (function () {
            var i;
            t.isArray(e[this.id]) && e[this.id].length && (i = t("<li/>"), a.settings.encodeErrorSummary ? i.text(e[this.id][0]) : i.html(e[this.id][0]), n.append(i))
        })), i.toggle(0 < n.find("li").length))
    }, A = function (i, e) {
        var a = C(i, e);
        if ("checkbox" !== (e = a.attr("type")) && "radio" !== e) return a.val();
        var n = a.filter(":checked");
        if (1 < n.length) {
            var r = [];
            return n.each((function (i) {
                r.push(t(n.get(i)).val())
            })), r
        }
        return n.length || (n = i.find('input[type=hidden][name="' + a.attr("name") + '"]')), n.val()
    }, C = function (t, i) {
        return (i = t.find(i.input)).length && "div" === i[0].tagName.toLowerCase() ? i.find("input") : i
    }, F = function (t, i, e) {
        i.updateAriaInvalid && t.find(i.input).attr("aria-invalid", e ? "true" : "false")
    }
}(window.jQuery);